(()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n,r=null!==(n=sessionStorage.getItem("bis_data"))?JSON.parse(n):null,o=r?r.config.facebookConfig.videoDetectorConfigNew:null,i=r?r.id+"_w":null;var a="SCRIPT",u="XML_HTTP_REQUEST",s="INSTREAM_CONFIG",f="MARKETPLACE_VIDEO_AD",l="FEED_VIDEO_AD",c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",s={detectionTime:Date.now()/1e3|0,videoId:e,videoUrl:t,previewImageUrl:r,audioUrl:n,linkDisplay:o,userName:i,adName:a,adLogo:u};return s},v=function(e,t){var n=new RegExp(t,"i"),r=e.match(n);if(!r)return!1;var o=r.filter((function(e){return e}));return!!o[1]&&o[1]},E=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=r?o.PARSERS.filter((function(e){return e.TYPE===r})):o.PARSERS,u=e(a);try{var c=function(){var e=n.value;if(e.CHECKER.some((function(e){return t.includes(e)})))return r===s?(setTimeout((function(){return h(e,t,i)}),0),"break"):r===f?(setTimeout((function(){return R(e,t)}),0),"break"):r===l?(setTimeout((function(){return A(e,t)}),0),"break"):(setTimeout((function(){return p(e,t)}),0),"break")};for(u.s();!(n=u.n()).done;){var v=c();if("break"===v)break}}catch(e){u.e(e)}finally{u.f()}},A=function(t,n){try{var r="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS\_SEPARATOR/g),o=t.CHECKER;r=r.filter((function(e){return o.some((function(t){return new RegExp(t).test(e)}))}));var i=[];if(r.length){var a,u=e(r);try{for(u.s();!(a=u.n()).done;){var s=a.value,f=s;"string"==typeof s&&(f=JSON.parse(s));var l=T(f,t),v=y(f,t),E=I(f,t),A=S(f,t.PATH_USER_NAME),h=c(E,l,"",v,"",A);E&&l&&i.push(h)}}catch(e){u.e(e)}finally{u.f()}i.forEach((function(e){setTimeout(H(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},h=function(t,n,r){var o=[],i=[];try{o.push(JSON.parse(n)),setTimeout(H({url:r,requestMethod:"POST",content:o},"FACEBOOK_INSTREAM_DATA"),0)}catch(a){(o="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS\_SEPARATOR/g)).forEach((function(n,r){if(!(n.length<=3)&&t.CHECKER.some((function(e){return n.includes(e)}))){var o,a=JSON.parse(n),u=a,s=a,f=e(t.PATH_NODES);try{for(f.s();!(o=f.n()).done;){var l=o.value,c=t.PATH_NODES.indexOf(l),v=t.PATH_NODES.length-1;c!==v&&u[l]&&(u=u[l]),c===v&&u[l]&&((u=u[l]).length?u.forEach((function(e){e.bisLinks={aboutPageLink:d(e,t.PATH_USER_ID)},e.video_id=_(e,t.PATH_VIDEO_ID),i.push(e)})):(u.bisLinks={aboutPageLink:d(u,t.PATH_USER_ID)},u.video_id=_(u,t.PATH_VIDEO_ID),i.push(u)))}}catch(e){f.e(e)}finally{f.f()}var E,A=e(t.PATH_ALL_VIDEO);try{var h=function(){var n=E.value,r=t.PATH_ALL_VIDEO.indexOf(n),o=t.PATH_ALL_VIDEO.length-1;if(r!==o&&s[n]&&(s=s[n]),"string"!=typeof n&&r===o&&n.length)if(s.length)s.forEach((function(t,r){var o=i[r];if(o.video_id===t.video_id){var a,u=e(n);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(t[s]){o[s]=t[s];break}}}catch(e){u.e(e)}finally{u.f()}}}));else if(1===i.length){var a=i[0];if(a.video_id===s.video_id){var u,f=e(n);try{for(f.s();!(u=f.n()).done;){var l=u.value;if(s[l]){a[l]=s[l];break}}}catch(e){f.e(e)}finally{f.f()}}}};for(A.s();!(E=A.n()).done;)h()}catch(e){A.e(e)}finally{A.f()}}})),i.forEach((function(e){setTimeout(H({url:r,requestMethod:"POST",content:e},"FACEBOOK_INSTREAM_DATA"),0)}))}},_=function(t,n){var r,o=t,i=null,a=e(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,s=n.indexOf(u),f=n.length-1;s!==f&&o[u]&&(o=o[u]),s===f&&o[u]&&(i=o[u])}}catch(e){a.e(e)}finally{a.f()}return parseInt(i,10)},d=function(t,n){var r,o=t,i=null,a=e(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,s=n.indexOf(u),f=n.length-1;s!==f&&o[u]&&(o=o[u]),s===f&&o[u]&&(i="https://www.facebook.com/".concat(o[u],"/about"))}}catch(e){a.e(e)}finally{a.f()}return i},p=function(e,t){t=t.replace(/ /g,"");var n=v(t,e.VIDEO_ID);if(n){var r=null,i=null,a="",u="",s="";e.VIDEO_HD_URL&&(r=v(t,e.VIDEO_HD_URL)),e.VIDEO_SD_URL&&(i=v(t,e.VIDEO_SD_URL)),e.LINK_DISPLAY&&(s=v(t,e.LINK_DISPLAY)),o.VIDEO_AUDIO_URL&&(a=(a=v(t,e.VIDEO_AUDIO_URL))?a.split("\\").join(""):a),e.THUMBNAIL&&(u=(u=v(t,e.THUMBNAIL))?u.split("\\").join(""):u);var f=i||r;if(f){f=f.split("\\").join("");var l=c(n,f,a,u,s);setTimeout(H(l,"FACEBOOK_VIDEO_DATA"),0)}}},R=function(t,n){try{var r="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS\_SEPARATOR/g),o=t.CHECKER;r=r.filter((function(e){return o.some((function(t){return new RegExp(t).test(e)}))}));var i=[];if(r.length){var a,u=e(r);try{for(u.s();!(a=u.n()).done;){var s=a.value,f=s;"string"==typeof s&&(f=JSON.parse(s));var l=O(f,t),v=T(f,t),E=y(f,t),A=I(f,t),h=S(f,t.PATH_NAME),_=S(f,t.PATH_LOGO),d=c(A,v,l,E,"","",h,_);A&&v&&i.push(d)}}catch(e){u.e(e)}finally{u.f()}i.forEach((function(e){setTimeout(H(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},S=function(t,n){var r,o=null,i=e(n);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,s=t,f=0;f<u;f++){var l=a[f],c=u-1;if(!s[l])break;f!==c&&s[l]&&(s=s[l]),f===c&&s[l]&&(o=s[l])}}catch(e){i.e(e)}finally{i.f()}return o},O=function(t,n){var r,o=null,i=e(n.PATH_AUDIO_URL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,s=t,f=0;f<u;f++){var l=a[f],c=u-1;if(!s[l])break;f!==c&&s[l]&&(s=s[l]),f===c&&s[l]&&(o=s[l])}}catch(e){i.e(e)}finally{i.f()}return o},T=function(t,n){var r,o=null,i=e(n.PATH_VIDEO_URL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,s=t,f=0;f<u;f++){var l=a[f],c=u-1;if(!s[l])break;f!==c&&s[l]&&(s=s[l]),f===c&&s[l]&&(o=s[l])}}catch(e){i.e(e)}finally{i.f()}return o},y=function(t,n){var r,o=null,i=e(n.PATH_THUMBNAIL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,s=t,f=0;f<u;f++){var l=a[f],c=u-1;if(!s[l])break;f!==c&&s[l]&&(s=s[l]),f===c&&s[l]&&(o=s[l])}}catch(e){i.e(e)}finally{i.f()}return o},I=function(t,n){var r,o=null,i=e(n.PATH_VIDEO_ID);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,s=t,f=0;f<u;f++){var l=a[f],c=u-1;if(!s[l])break;f!==c&&s[l]&&(s=s[l]),f===c&&s[l]&&(o=s[l])}}catch(e){i.e(e)}finally{i.f()}return o},g=function(e,t){t=String(t);var n=o.PARSER_CONFIG[e];return n.SEPARATOR?t.split(n.SEPARATOR):[t]},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=g(t,e);r.forEach((function(e){setTimeout((function(){return E(e,t,n)}),0)}))},H=function(e,t){return function(){!function(e,t,n){try{var r={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:n,from:e,to:e.substring(0,e.length-2),content:t};window.postMessage(r)}catch(e){}}(i,e,t)}};if(o.PARSER_CONFIG.SCRIPT.USE){setInterval((function(){var t,n=e(document.querySelectorAll("script"));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.hasAttribute("bis_use")||(r.setAttribute("bis_use","true"),D(r.innerHTML,a))}}catch(e){n.e(e)}finally{n.f()}}),o.PARSER_CONFIG.SCRIPT.INTERVAL_MS||5e3)}if(o.PARSER_CONFIG.LISTEN_HTTP_REQUESTS){var P=XMLHttpRequest.prototype.open,L=XMLHttpRequest.prototype.setRequestHeader,b=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0].toLowerCase(),t=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[e]=t,L.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],P.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){var e=this.onreadystatechange;return this.onreadystatechange=function(){var t=this,n=o.MATCH_URLS,r=o.MATCH_HEADERS,i=this.requestHeaders?Object.keys(this.requestHeaders):null,a=o.PARSER_CONFIG.INSTREAM_CONFIG,c=o.PARSER_CONFIG.MARKETPLACE_VIDEO_AD,v=o.PARSER_CONFIG.FEED_VIDEO_AD,E=!1,A=null,h=null;if(i&&(E=i.some((function(e){if(r[e]&&r[e].includes(t.requestHeaders[e]))return A=e,h=t.requestHeaders[e],!0}))),4===this.readyState&&n.filter((function(e){return e.indexOf(t.responseURL)})).length>0)if(E)switch(!0){case a.USE&&a.HEADERS[A].includes(h):setTimeout((function(){return D(t.response,s,t.responseURL)}),0);break;case c.USE&&c.HEADERS[A].includes(h):setTimeout((function(){return D(t.response,f,t.responseURL)}),0);break;case v.USE&&v.HEADERS[A].includes(h):setTimeout((function(){return D(t.response,l,t.responseURL)}),0)}else setTimeout((function(){return D(t.response,u)}),0);if(e)return e.apply(this,arguments)},b.apply(this,arguments)}}})();