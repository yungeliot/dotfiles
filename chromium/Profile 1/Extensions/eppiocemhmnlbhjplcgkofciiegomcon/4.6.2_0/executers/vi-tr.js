(()=>{function t(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}function e(e,n,o,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{var i=document.location.host,a="detector",c={posdMessageId:"PANELOS_MESSAGE",posdHash:t(),type:"VIDEO_XHR_CANDIDATE",from:a,to:a.substring(0,a.length-2),content:{requestMethod:e,url:n,type:o,content:s}};i.includes("youtube.com")&&r&&r[0]&&r[0].length&&(c.content.encodedPostBody=r[0]),window.postMessage(c,"*")}catch(t){}}var n=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],n.apply(this,arguments)};var o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var t=Object.assign(arguments,{}),n=this.onreadystatechange;return this.onreadystatechange=function(){var o=function(t){var e=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!e&&e.some((function(e){return t.includes(e)}))};if(4!==this.readyState||o(this.responseURL)||e(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,t),n)return n.apply(this,arguments)},o.apply(this,arguments)};var s=fetch;fetch=function(){var t=this,n=arguments,o=arguments[0]instanceof Request?arguments[0].url:arguments[0],r=arguments[0]instanceof Request?arguments[0].method:"GET";return new Promise((function(i,a){s.apply(t,n).then((function(t){if(t.body instanceof ReadableStream){var n=t.json;t.json=function(){var s=arguments,i=this;return new Promise((function(a,c){n.apply(i,s).then((function(n){0!==t.url.search(/data:application\/json;base64/)&&e(r,o,t.headers.get("content-type"),JSON.stringify(n)),a(n)})).catch((function(t){c(t)}))}))};var s=t.text;t.text=function(){var n=arguments,i=this;return new Promise((function(a,c){s.apply(i,n).then((function(n){0!==t.url.search(/data:application\/json;base64/)&&e(r,o,t.headers.get("content-type"),n),a(n)})).catch((function(t){c(t)}))}))}}i.apply(this,arguments)})).catch((function(t){a.apply(this,arguments)}))}))}})();